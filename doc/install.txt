Установка сервера распознавания

Yandex SpeechKit Box

Устанавливать по инструкции TODO. Сам не пробовал, было уже готовое. Нужно установить lingware freeform. Остальные (более специализированные) не нужны.

Лицензия устаревает за 10 дней. Так что для постоянной работы нужно включить скрипт обновления лицензии TODO. Из этого следует, что у сервера должен быть нормальный (без хитрых авторизаций) доступ к внешнему HTTPS. Скрипт при установке вроде бы прописывается в cron.daily, но не работает, поскольку в Ubuntu и Debian оттуда выполняются только файлы без расширения, а у него расширение .sh. Надо переименовать.

Для демонстрации постоянное обновление не требуется, но один раз ее обновить (или получить) надо. Команда для этого:
TODO

Данные, которые оно запрашивает, нужны настоящие.

Подробности про лицензию: TODO.

Симптомы неживой лицензии: yandex-asr-server при запуске долго тормозит, и в начале лога ругается на лицензию. Тонкость: тормозит он тоже не молча, и если смотреть systemctl status yandex-asr-server, то вскоре информация про лицензию пролистнется. journalctl -xe позволяет увидеть больше.

У меня при попытке запуска выяснилось, что библиотеки SSL, идущие в комплекте, не тех версий. Дистрибутивные как раз тех, но нужные пакеты не стояли. Но судя по тому, что я видел, он изначально ставился как-то криво. Симптомы: собственно сервер (yandex-asr-server) запускается нормально, а прокси (yandex-asr-proxy-server) — нет. Причем молчит как рыба об лед. Надо выкопать из скрипта команду запуска бинарника и выполнить вручную, тогда он расскажет, что не смог загрузить. Важно: скрипт запуска устанавливает переменную окружения LD_LIBRARY_PATH так, чтобы библиотеки, идущие в комплекте, были доступны, но, кажется, рассматривались последними. Тонкость такая: собственные библиотеки из комплекта должны быть доступны, иначе не запустится. Но одноименные дистрибутивным, похоже, должны быть позже дистрибутивных, а то они кривые. Впрочем, кривизна, возможно, от кривой установки до меня.

Остальное (прием записей и подача их в SpeechkitBox):

$ cd
$ sudo apt-get install git
$ git clone TODO
$ cd talkrec
$ install/server demo



